<div class="container mt-5">
  <h1 class="text-center mb-4">Reporte De Compra</h1>
  <div class="row mb-4">
    <div class="col-md-4">
      <label for="startDate">Fecha de Inicio:</label>
      <input type="date" id="startDate" class="form-control" [(ngModel)]="filters.startDate">
    </div>
    <div class="col-md-4">
      <label for="endDate">Fecha de Fin:</label>
      <input type="date" id="endDate" class="form-control" [(ngModel)]="filters.endDate">
    </div>
    <div class="col-md-4">
      <label for="user">Administrador/User:</label>
      <select id="user" class="form-control" [(ngModel)]="filters.Admin">
        <option value="">Todos</option>
        <option *ngFor="let user of users" [value]="user.nombre_administrador">{{ user.nombre_administrador }}</option>
      </select>
    </div>
  </div>
  <div class="row mb-4">
    <div class="col-md-4">
      <label for="proveedor">Proveedor:</label>
      <select id="proveedor" class="form-control" [(ngModel)]="filters.proveedor">
        <option value="">Todos</option>
        <option *ngFor="let proveedor of proveedores" [value]="proveedor.nombre">{{ proveedor.nombre }}</option>
      </select>
    </div>
    <div class="col-md-4">
      <label for="producto">Producto:</label>
      <select id="producto" class="form-control" [(ngModel)]="filters.producto">
        <option value="">Todos</option>
        <option *ngFor="let product of productos" [value]="product.categoria">{{ product.categoria }}</option>
      </select>
    </div>
    <div class="col-md-4 d-flex align-items-end">
      <button class="btn btn-primary btn-block" (click)="applyFilters()">Aplicar Filtros</button>
    </div>
  </div>
  <div class="row mb-4">
    <div class="col-md-6">
      <button class="btn btn-success btn-block" (click)="exportToExcel()">Exportar a Excel</button>
    </div>
    <div class="col-md-6">
      <button class="btn btn-danger btn-block" (click)="exportToPDF()">Exportar a PDF</button>
    </div>
  </div>
  <div class="table-responsive" id="pdfTable">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>Fecha</th>
          <th>Producto</th>
          <th>Administrador/User</th>
          <th>Proveedor</th>
          <th>Cantidad</th>
          <th>Precio</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of filteredCompraConDetalle">
          <td>{{ item.boleta.fecha }}</td>
          <td>{{ item.productos }}</td>
          <td>{{ item.boleta.nombre_administrador }}</td>
          <td>{{ item.boleta.nombre_proveedor }}</td>
          <td>{{ item.cantidades }}</td>
          <td>{{ item.precios }}</td>
          <td>{{ item.boleta.total | currency }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
